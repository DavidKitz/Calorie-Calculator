
<% let deleteList= function (i) { %>
 <% data.splice(i,1)  } %>
<% let calIntake=0,protIntake=0,carbIntake=0,k=1,count=0; %>

 
    
    <table>
       
        <tr>
          <td>Name of the Food</td>
          <td>Serving Size</td>
          <td>Calories</td>
          <td>Protein</td>
          <td>Carbohydrates</td>
        </tr>
      
        
<% for (let i=0;i<data.length;i++) { %>
<% calIntake+= Number(data[i].kcal); protIntake+= Number(data[i].protein); carbIntake+= Number(data[i].carbs) %>



    <tr>
    <td>  <%= data[i].name %></td> <td><label for="gram"></label> 
      <form action="/randy" method="POST">
      <select name="<%=count %>" id="<%=count %>">
      
        <option value="1">100</option>
        <option value="2">200</option>
        <option value="3">300</option>
        <option value="4">400</option>
        <option value="5">500</option>
      </select> <input type="submit" value="submit"></td> 
    </form>
      <td class="<%=count %>">  <%= data[i].kcal %> </td> <td class="<%=count %>"><%= data[i].protein %></td><td class="<%=count %>"><%= data[i].carbs %></td>
      <td> <a href="/calculus/<%= i %>" >Delete</a> </td>  
    </tr>
    <% count++; %>
    <% } %>
    
    <h2> Your current Nutrition intake contains <%= Math.floor(calIntake) %> kcal, <%= Math.floor(protIntake) %>g Protein %> and <%=Math.floor(carbIntake)%>g Carbohydrates   </h2>   
    <form action="/information" method="GET">
      <input type="text"  placeholder="Search for more food" name="search" required>
      <input type="submit">
      </form>
    
     
      </table>

    <script>
      //Get current option value and change the td values accordingly
     

      // function checkVal(t,x) {
      //   //console.log(val1[0].innerHTML);
      //  let check=true;
      //  for (let i=0;i<=t;i++) {
      //   let opt=document.getElementById(i).value;
      //   let row=document.getElementsByClassName(i);
      //   console.log(document.getElementById(i).options[document.getElementById(i).selectedIndex]);
      //   if (opt==100) {
      //     return;
      //   }
      //   if(opt==200) { 
      //     if(check=true) {
      //       row[0].innerHTML*=2;
      //       row[1].innerHTML*=2;
      //       row[2].innerHTML*=2;
      //     }
      //     }
      //     if(opt==300) {
      //       row[0].innerHTML*=3;
      //       row[1].innerHTML*=3;
      //       row[2].innerHTML*=3;
      //     }
      //     if(opt==400) {
      //       row[0].innerHTML*=4;
      //       row[1].innerHTML*=4;
      //       row[2].innerHTML*=4;
      //     }
      //     if(opt==500) {
      //       row[0].innerHTML*=5;
      //       row[1].innerHTML*=5;
      //       row[2].innerHTML*=5;
      //     }
          
      //   }
        
      // }
    </script>